---
# To be used with save_scf.yml
- name: Save an SCF
  f5networks.f5_modules.bigip_command:
    commands: save sys config file {{ inventory_hostname }}_{{ ansible_date_time.date }}
    provider: "{{ provider }}"

- name: Compare SCF files using shell diff
  ansible.builtin.shell: diff -y --suppress-common-lines /var/local/scf/{{ inventory_hostname }}_{{ ansible_date_time.date }}.scf /var/local/scf/{{ inventory_hostname }}.scf
  register: diff_output
  ignore_errors: true

- name: Show diff results
  debug:
    msg: "{{ diff_output.stdout }}"
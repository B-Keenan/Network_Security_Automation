---
- name: AWX Main Playbook
  hosts: localhost
  gather_facts: false

  roles:
    - role: pre_datetime
      tags:
        - pre_check
    - role: pre_awx_info
      tags:
        - pre_check
    - role: keycloak
      tags:
        - jit_creds
    - role: general
      tags:
        - general

  vars:
    ansible_connection: local
    awx_url: "http://awx-service.awx.svc.cluster.local/api/v2"
    awx_token: "AQZjwTwWhzqewaKa7hNUu51RSaItf0"
    vault_addr: "http://10.255.32.212:30200"
    vault_token: "hvs.8OMSFwN7ek1SJiJ0oNIbuN1x"
    vault_approle_role_id: "b7761482-1989-0bd8-c4fc-65754e1207ed"
    vault_approle_secret_id: "06c98250-0664-5bd3-586d-4c56da06040a"
    organization_id: 2